version: "3.7"
services:
  db:
    container_name: db
    image: mongo:latest
    ports:
      - "27017:27017"
    volumes:
      - data-volume:/data/db
      - mongo-config:/data/configdb
  typescript-backend:
    container_name: typescript_backend
    build:
      context: typescript/
      dockerfile: Dockerfile
    ports:
      - "8080:8080"
    links:
      - db
    command: npm run-script watch
    # command: npm start
    depends_on:
      - db
    volumes:
      - ./typescript:/app-ts:rw
      - /app-ts/node_modules
    environment:
      - MONGO_URL=mongodb://db:27017/local
volumes:
  data-volume:
  mongo-config:
